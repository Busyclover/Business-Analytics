---
title: "Predicting Bike Demand and Segmenting Users to Further Maximize Profit"
author: "Ming-Yu Liu"
date: "December 4, 2015"
output: pdf_document
---

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(dplyr)
library(tidyr)
library(scales)
library(ggplot2)
library(gridExtra)
library(lubridate)
library(data.table)
setwd("/Users/ethen/Business-Analytics/2_bike_sharing")
data <- fread("data/train.csv")
data[ , datetime := ymd_hms(datetime) ]

demand <- select( data, datetime, casual, registered ) %>%
		  tbl_dt() %>%
		  mutate( datetime = year(datetime) ) %>%
	      gather( "user", "count", -1 ) %>%
		  group_by( datetime ) %>%
		  summarise( count = sum(count) )

```

The total demand for bikes has increased significantly through out the last year. Rising from `r demand$datetime[1]`'s `r demand$count[1]` to `r demand$datetime[2]`'s `r demand$count[2]`. Thus we should capitalize on visable growth by effective pricing and market segmentation.

**Findings: **

There are different daily bike-usage behaviors between registered and casaul users. As shown below :

```{r, echo=FALSE, fig.height=5, fig.width=8}

subdata2 <- select( data, datetime, casual, registered ) %>%
		    tbl_dt() %>%
		    mutate( datetime = lubridate::wday( datetime, label = TRUE ) ) %>%
		    gather( "user", "count", -1 ) %>%
		    group_by( datetime, user ) %>%
			summarise( count = sum(count) )

# registered and unregisted users
ggplot( subdata2, aes( datetime, count, group = user, color = user ) ) + 
geom_line( size = 1 ) + geom_point( size = 3 ) + 
scale_y_continuous( label = comma ) +
scale_colour_discrete( limit = c( "registered", "casual" ) ) + 
ggtitle( "2011-2012 User's Daily Bike Demand" )

```

Daily total bike demand plot infers that registered users use bikes more often on weekdays, while casual users' demand are higher on weekends. 

**Suggested Actions: **

- Investigate potential likeings more different users to back up dynamic campaign placement on bikes towards different users
- Different pricing strategy for various timespan.
- Predict bike demands for different types of users in different locations. That way, not only can we maximize our profit and customer satisfaction by providing enough bikes at the right moment and right timing, but also identify locations of demands for different users and adjust bike downtime (for maintenance) accordingly.

